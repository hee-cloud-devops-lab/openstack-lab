# 1.1 클라우드 컴퓨팅 정의와 종류

## 1.1.1 클라우드 컴퓨팅의 정의

- 클라우드 컴퓨팅(Cloud Computing)은 **인터넷이 가능한 디바이스(스마트폰, 스마트패드, 스마트TV, 노트북, 컴퓨터, 냉장고 등)로 제 3의 공간인 클라우드에서 데이터를 읽고, 쓰고, 정보를 분석해 처리하며, 이를 저장하고 관리하는 컴퓨팅 시스템**이다.
- 스마트폰에 무거운 비즈니스 로직을 처리하는 서버 로직이나 동영상과 음악 파일이 없어도 클라우드에 있는 서버에서 바로 비즈니스 로직을 처리하거나 동영상과 음악 파일을 저장할 수 있다.

## 1.1.2 클라우드 서비스의 종류

### IaaS(Infrastructure as a Service)

- 서버, 스토리지, 네트워크를 가상화 환경으로 만들어 필요에 따라 인프라 자원을 사용할 수 있게 제공하는 서비스
    - 쉽게 말해 웹 서버나 애플리케이션 서버로 사용할 리눅스나 윈도 서버를 호스팅 업체에서 임대하는 것
    - 대표적인 예로 AWS의 EC2, S3 등이 있다.
- IaaS에서는 서버, 스토리지, 네트워크 등의 물리 환경, 즉 인프라 자원을 서비스로 제공한다.

### PaaS(Platform as a Service)

- SaaS의 개념을 개발 플랫폼으로 확장한 것으로, 웹에서 개발 플랫폼을 쉽게 빌려쓸 수 있는 서비스이다.
  
![image](https://github.com/user-attachments/assets/7c956a91-613e-4f7e-a645-bbdc40c7f1c0)

- 개발자는 데이터베이스 서버와 웹 서버를 구축해야 하는데, 이 때 필요한 서비스가 바로 PaaS이다.
- 네이버나 다음에서 제공하는 뉴스를 보여주거나, 케이웨더에서 제공하는 날씨 정보를 보여주는 웹 페이지를 개발한다고 가정하자.
    - 이 때 네이버나 다음에서 제공하는 뉴스 API나 케이웨더에서 제공하는 날씨 API를 이용한다면, 더 쉽게 웹 페이지를 구현할 수 있다.
    - 이러한 API 서비스도 PaaS 서비스의 일부이다.

### SaaS(Software as a Service)

- IaaS와 PaaS 위에 올라가는 소프트웨어를 의미하며, 온디맨드 소프트웨어(On-demand Software)라고도 한다.
    - 중앙에서 호스팅되는 소프트웨어를 웹 브라우저 등 클라이언트로 이용하는 서비스이다.
- 예를 들어 IaaS에서 서비스되는 가상 서버에 웹 서버와 WAS를 설치하고, 데이터베이스 서버를 연동해 웹 사이트를 구축했다면 이것이 바로 SaaS가 된다.
    - 즉, 클라우드 환경에서 동작하는 모든 애플리케이션이 SaaS이다.
- 쉬운 예로 구글 Docs를 들 수 있다.
    - 구글 Docs를 이용하면 오피스 프로그램 없이도 인터넷에서 문서 작업이 가능하며, 다른 사람과 공유할 수 있다.

### DaaS(Desktop as a Service)

[가비아 라이브러리](https://library.gabia.com/contents/infrahosting/10517/)

- 클라우드 인프라를 이용해 일반 사용자용 윈도 등 데스크톱 운영체제가 설치된 인스턴스를 서비스 받는 것
- DaaS 서비스를 이용하는 이용자는 개인용 컴퓨터가 없어도 클라우드 서비스와 연결 가능한 단말기만 있으면 언제든지 클라우드에 접속해 일할 수 있다.
    - 이러한 서비스는 공공 기관이나 대기업, 은행처럼 주로 보안이 중요한 곳에서 데이터 유출이나 불법 소프트웨어 사용을 방지한다.

### BaaS(Backend as a Service)

[BaaS란? | 서비스형 백엔드와 서버리스의 비교 | Cloudflare](https://www.cloudflare.com/ko-kr/learning/serverless/glossary/backend-as-a-service-baas/)

- 모바일 환경에서 구현하기 복잡하고 힘든 서버 사이드 서비스를 API 서비스로 제공해 모바일 앱이나 웹을 개발할 때 UI/UX에 집중할 수 있도록 하는 서비스
- 클라우드 서비스와 모바일, 사물인터넷(IoT) 산업이 활성화되면서 무겁고 어려운 비즈니스 로직을 직접 구현하지 않고도 필요에 따라 클라우드 서버에 이미 구축된 백엔드 서비스로 쉽게 구현할 수 있다.
    - 이러한 백엔드 서비스는 주로 모바일 환경에서 사용했지만, 최근에는 사물인터넷 산업 활성화와 개발 환경 변화로 모바일이 아닌 환경으로도 확산되고 있다.

## 1.1.3 클라우드의 공개 범위

### 퍼블릭 클라우드(Public Cloud)

- 아마존이나 구글, 마이크로소프트 등 서비스 제공자에게서 서버나 스토리지를 제공받아 PaaS 같은 개발 환경이나 SaaS에 해당하는 소프트웨어 서비스를 하는 것을 통칭해 퍼블릭 클라우드라고 한다.
    - 쉽게 말해, 인터넷만 되면 언제 어디서든지 접근이 가능한 서버, 스토리지, 개발 환경, 소프트웨어를 퍼블릭 클라우드라고 생각하면 된다.

### 프라이빗 클라우드(Private Cloud)

- 퍼블릭 클라우드의 반대로, 인터넷에 공개하지 않는 것
- 외부에 공개하면 곤란한 시스템으로 사내에서 직원들끼리만 사용하는 메신저, 그룹웨어, ERP 시스템 등이 있다.
- 내부에서만 쓸 수 있는 별도의 서버나 스토리지 자원으로 클라우드 컴퓨팅 시스템을 구축하고, 거기서만 사용하는 개발환경, 소프트웨어를 프라이빗 클라우드라고 한다.

### 하이브리드 클라우드(Hybrid Cloud)

- 퍼블릭 클라우드와 프라이빗 클라우드 두가지를 모두 관리하는 클라우드 시스템
- 퍼블릭 클라우드 영역에 있는 인스턴스를 언제든지 프라이빗 클라우드 영역으로 가져올 수 있고, 프라이빗 클라우드 영역에 있는 인스턴스를 퍼블릭 클라우드 영역으로 내보낼 수 있는 클라우드 시스템을 하이브리드 클라우드라고 한다.

# 1.2 클라우드 핵심 서비스 컴퓨트와 스토리지

- 하드웨어라는 서버, 데이터를 저장하는 스토리지, 인터넷 등의 통신 네트워크 자원 IaaS에 해당한다.

## 1.2.1 컴퓨트 서비스(Compute Service)

- 컴퓨트 서비스는 사용자가 원하는 운영체제가 탑재된 컴퓨터나 서버를 인터넷에서 사용할 수 있게 제공하는 유료 또는 무료 서비스를 말한다.
- 컴퓨트 서비스는 시스템을 구축할 때 필요한 서버를 가상으로 할당해주는 서비스로, **이 때 할당하는 가상 서버를 인스턴스라고 한다.**

## 1.2.2 스토리지 서비스(Storage Service)

- 우리 주변에서 많이 사용하는 N드라이브나 Dropbox 등은 스토리지 서비스에 해당한다.
- 사용자가 소유한 데이터나 음악, 동영상, 문서 파일을 인터넷에 있는 스토리지에 저장, 삭제, 공유할 수 있는 서비스를 말한다.
    - 다시 말해, 인터넷이 가능한 스마트폰, 스마트패드, 스마트TV, 노트북 등 컴퓨터만 있으면 언제 어디서든지 클라우드 스토리지에 접근해서 파일을 읽고 쓸 수 있다.
- 스토리지 서비스는 컴퓨트 서비스와 다르게 어떤 서비스를 제공하느냐에 따라 IaaS 범위에 해당하는 서비스일 수도 있고, SaaS 범위에 해당하는 서비스일 수도 있다.
    - IaaS는 하드웨어 자체를 서비스로 제공하는 반면, SaaS는 사용하기 쉽고 편리한 인터페이스를 제공한다.
    - 예를 들어, 사진, 음악, 동영상 등 파일을 올리고 확인할 수 있는 웹 사이트나 모바일 애플리케이션 등 완성된 소프트웨어를 제공한다면 SaaS에 해당한다.
    - 아마존의 S3 등을 IaaS단의 스토리지 서비스라고 할 수 있다.
 
# 1.3 하이퍼바이저의 정의와 종류

## 1.3.1 하이퍼바이저의 정의

![image](https://github.com/user-attachments/assets/e389ec75-76b5-49ca-b230-74a96fb5ac01)


- 하이퍼바이저(Hypervisor)는 **호스트 컴퓨터(Host Computers) 한 대에서 운영체제 다수를 동시에 실행하는 논리적 플랫폼을 말한다.**
    - 가상 머신 모니터라고도 한다.

## 1.3.2 하이퍼바이저의 분류

- 하이퍼바이저는 하드웨어에 직접 설치해서 실행되는 Native(또는 베어메탈) 방식과 일반 애플리케이션처럼 프로그램으로 설치되는 Hosted 방식으로 분류한다.
    - 즉, 하드웨어에 직접 설치되느냐 운영체제에 설치되느냐에 따라 분류된다.

### Native(또는 베어메탈)

![image](https://github.com/user-attachments/assets/2fc413a1-c710-4e7a-9fa2-01533b7134c1)


- Native 방식의 하이퍼바이저는 **해당 하드웨어에 직접 설치해서 실행된다.**
    - 그러면 게스트 운영체제는 이미 하드웨어에 설치된 하이퍼바이저에서 두번째 수준으로 실행된다.
- 위 그림처럼 **하드웨어 운영체제 대신 Xen, KVM, Xen Server 같은 하이퍼바이저가 설치되고, 설치된 하이퍼바이저 위에 서로 다른 운영체제가 실행되는 방식이다.**
    - 이러한 하이퍼바이저를 줄여서 다른 말로 TYPE1이라고 한다.
    - 쉽게 말하자면, 일반적으로 우리가 사용하는 컴퓨터에는 Host OS가 존재하는데, 이 방식은 Host OS는 없고 설치된 하이퍼바이저 위에 Guest OS만 존재한다.
- 이러한 타입에 해당하는 하이퍼바이저에는 Xen, 시트릭스의 Xen Server, VMware의 ESX Server, L4 microkernel, TRANGO, IBM의 POWER 하이퍼바이저, 마이크로소프트의 Hyper-V 등이 있다.
    - 또한, 하이퍼바이저 안에 완전한 리눅스 커널을 넣은 KVM도 TYPE1에 해당한다.

### Hosted

![image](https://github.com/user-attachments/assets/fc4e410b-d348-4cf4-af6f-75552425a965)


- Hosted 방식의 하이퍼바이저는 일반 프로그램처럼 호스트 운영체제에서 실행되며, 가상 머신 안에서 동작되는 게스트 운영체제는 하드웨어에서 세 번째 수준으로 실행된다.
    - 쉽게 말해 집에 있는 윈도우나 맥, 리눅스에 오라클 Virtual Box나 VMWare Workstation을 설치하고 다른 운영체제를 띄우는 것을 Hosted 방식의 하이퍼바이저라고 한다.
- VMWare Server, VMware Fusion, QEMU 등이 있고, 이들을 TYPE2라고 한다.

## 1.3.3 가상화 방식에 따른 하이퍼바이저

- 어떻게 설치하느냐가 아니라 어떤 방식으로 가상화를 했느냐에 따라 나누기도 한다.

[Choosing Between KVM and QEMU Hypervisors for Cloud Computing](https://www.linkedin.com/pulse/choosing-between-kvm-qemu-hypervisors-cloud-computing-rakesh-rathi/)

### 전가상화 방식(Full Virtualization)

![image](https://github.com/user-attachments/assets/0aa330a3-35a9-47f3-ad0f-a777bacc849d)


- 하드웨어를 모두 가상화한 것을 말한다.
    - 따라서 **게스트 운영체제를 변경하지 않고 다양한 운영체제로 이용할 수 있는 장점**이 있다.
- 하지만 전가상화를 하려면 물리적인 가상화를 지원하는 CPU의 가상화 기술을 이용해야 한다.
    - 즉, 전가상화 기술을 이용하려면 해당 CPU가 가상화 기술을 지원해야 한다.
    - 최근 Intel VT나 AMD-V 기능을 필수적으로 요구하는 이유가 이것 때문이다.
- 위 그림을 보면, 하드웨어 아키텍처 위에 가상화 레이어가 존재하고, 해당 가상화 레이어로 서로 다른 가상의 하드웨어, 운영체제, 소프트웨어를 실행한다.
    - Native 방식과 비슷한 것을 확인할 수 있다.
- 전가상화 방식에서는 가상화를 지원하는 CPU를 직접 사용하므로, 윈도우를 설치할 수 있다.
    - 리눅스 같은 오픈 소스들을 설치할 수 있으면 반가상화 방식이라고 생각할 수 있다.
    - 오픈스택의 기본 하이퍼바이저인 KVM은 윈도우를 게스트로 설치할 수 있으므로 전가상화 방식을 지원한다고 할 수 있다.

### 반가상화 방식(Para Virtualization)

![image](https://github.com/user-attachments/assets/549dc43a-7671-4df7-9531-0dc94df53ab2)


- 전가상화 방식과 달리 하드웨어를 완전하게 가상화하지 않은 것
    - 그래서 **게스트 운영체제가 하드웨어를 직접 제어할 수 없고, 하이퍼바이저로만 제어 가능하다.**
- 하이퍼바이저가 모든 것을 제어하기 때문에 높은 성능을 유지할 수 있다.
- 하지만, 반가상화 방식의 경우 게스트 운영체제의 커널 일부분을 변경해야 하는 단점이 있어 오픈소스가 아닌 운영체제에서는 운영할 수 없다.
    - 왜냐하면,, 직접 커스텀해야하는데 오픈소스가 아니면 고칠 수 없으니까,,,
- 가상화를 지원하지 않는 CPU가 있는 서버에 오픈스택을 설치하면 KVM이 아닌 QEMU가 설치된다.
    - QEMU는 반가상화 방식의 대표적인 하이퍼바이저라고 할 수 있다.
    - KVM은 QEMU에서 실행되는 하이퍼바이저이다.
    - 따라서 KVM은 전가상화와 반가상화를 모두 지원하는 하이퍼바이저이다.

## 1.3.4 다양한 종류의 하이퍼바이저

### KVM (for Kernel-based Virtual Machine)

![image](https://github.com/user-attachments/assets/17695888-94de-4be2-9793-54806e824120)


- 오픈스택의 기본 하이퍼바이저인 KVM은 커널을 기반으로 **전가상화 방식을 지원하는 오픈소스 하이퍼바이저** 중 하나이다.
    - 따라서 반드시 가상화가 지원되는 Intel VT나 AMD-V가 있어야만 사용할 수 있다.
- KVM을 사용하면 리눅스나 윈도우 이미지를 수정하지 않고 여러 가상 머신으로 실행할 수 있다.
- KVM으로 각 가상 머신은 네트워크 인터페이스 카드, 디스크, 그래픽 어댑터 같은 가상화된 하드웨어를 가질 수 있다.
- 하드웨어는 가상화 기술이 있는 x86을 지원하고, 리눅스 커널 안에 KVM 모듈이 포함되어 있음을 확인할 수 있다.
    - 또한, 게스트 사용자 전용 프로세스(Guest User Space Processes, VM 내부에서 동작하는 프로그램)는 QEMU의 게스트 커널 위에 올라가 있다는 것도 알 수 있다.

### Xen과 Xen Server

- Xen은 케임브리지 대학교에서 시작되어 2003년에 첫 공개 버전을 발표한 오픈소스 하이퍼바이저이다.
    - 초기에는 반가상화만 지원해 게스트 운영체제를 실행하려면 게스트 운영체제를 Xen에서 실행할 수 있게 수정해야 했다.
    - 하지만 3.0부터는 게스트 운영체제를 수정하지 않아도 Xen에서 실행이 가능해졌다.
    - 다만 QEMU같은 CPU 에뮬레이터가 아닌 전통적인 하이퍼바이저이기 때문에 호스트와 다른 아키텍처의 게스트는 실행할 수 없다.
